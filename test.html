<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <h1>Navigation</h1>
    <nav>
        <a href="#home">home</a>
        <a href="#about">about</a>
        <a href="#contact">contact</a>
    </nav>

    <h1>Contact</h1>
    <form>
        <div>
            Name: <input class="input-name">
        </div>
        <div>
            Gender:
            <select name="gender">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>
        <div>
            Message:
            <textarea></textarea>
        </div>
        <div>
            <button>Submit</button>
        </div>
    </form>

    <h1>Media</h1>
    <div>
        <video controls>
            <source src="http://www.w3schools.com/html/mov_bbb.ogg" type="video/ogg">
        </video>
    </div>
    <div>
        <audio controls>
            <source src="http://www.w3schools.com/html/horse.ogg" type="audio/ogg">
        </audio>
    </div>

    <script src="src/SearchField.js"></script>
    <script src="src/DOMCrawler.js"></script>
    <script src="src/SearchNavigator.js"></script>
    <script src="src/interactables/Interactable.js"></script>
    <script src="src/interactables/Focusable.js"></script>
    <script src="src/interactables/Clickable.js"></script>
    <script src="src/interactables/Playable.js"></script>

    <script>
        // Search element setup
        var inputElement = document.createElement("input");
        var resultCountElement = document.createElement("span");

        var searchElement = document.createElement("div");
        searchElement.id = "r-search-field";
        searchElement.appendChild(inputElement);
        searchElement.appendChild(resultCountElement);

        var rootElement = document.body;
        rootElement.appendChild(searchElement);


        // Application setup

        var rDOMCrawler = new r.DOMCrawler(rootElement);
        var rSearchField = new r.SearchField(inputElement, resultCountElement);
        var rSearchNavigator = new r.SearchNavigator(rootElement, rSearchField, rDOMCrawler);

        rDOMCrawler.cacheInteractables();


        // Keybinding setup
        document.addEventListener('keydown', function (event) {
            // Alt+Q
            if (event.keyCode == 81 && event.altKey) {
                rSearchNavigator.open();
            }
            // Esc
            else if (event.keyCode == 27) {
                rSearchNavigator.close();
            }
        });

        inputElement.addEventListener('keydown', function (event) {
            // Arrow up
            if (event.keyCode == 38) {
                rSearchNavigator.previous();
                event.preventDefault();
            }
            // Arrow down
            else if (event.keyCode == 40) {
                rSearchNavigator.next();
                event.preventDefault();
            }
            // Enter
            else if (event.keyCode == 13) {
                rSearchNavigator.execute();
                event.preventDefault();
            }
        });

        inputElement.addEventListener('input', function () {
            rSearchNavigator.search();
        });
    </script>
</body>
</html>